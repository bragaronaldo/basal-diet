<main id="main">

  <form id="form" class="form-content" (ngSubmit)="calculateBasalMetabolism()" [formGroup]="userForm" #formDir="ngForm"
    [class.form-collapsed]="result" *ngIf="!result">
    <img [src]="userForm.get('userImage')?.value" class="profile-image">
    <label for="imageInput" class="pi pi-image upload-image-btn">

    </label>
    <input type="file" accept="image/*" style="display: none;" (change)="onImageSelect($event)" id="imageInput">
    <label for="first-name">Nome</label>
    <input type="text" id="first-name" name="first-name" placeholder="ex: João" formControlName="name">
    <div *ngIf="formControls['name'].invalid && formDir.submitted" class="mb-1">
      <small id="username-help" class="error-msg">Informe seu nome</small>
    </div>

    <label for="last-name" [class.form-errorMsg]="formControls['name'].invalid && formDir.submitted">Sobrenome</label>
    <input type="text" id="last-name" name="last-name" placeholder="ex: Pereira" formControlName="last_name">
    <div *ngIf="formControls['last_name'].invalid && formDir.submitted" class="mb-1">
      <small id="username-help" class="error-msg">Informe seu sobrenome</small>
    </div>

    <label for="age" [class.form-errorMsg]="formControls['last_name'].invalid && formDir.submitted">Idade</label>
    <input type="number" id="age" name="age" placeholder="ex: 34" formControlName="age"
      onkeypress="return event.keyCode === 8 || event.charCode >= 48 && event.charCode <= 57">
    <div *ngIf="formControls['age'].invalid && formDir.submitted" class="mb-1">
      <small class="error-msg">Informe sua idade</small>
    </div>

    <label for="weight" [class.form-errorMsg]="formControls['age'].invalid && formDir.submitted">Peso</label>
    <input type="number" id="weight" name="weight" placeholder="ex: 67" formControlName="weight"
      onkeypress="return event.keyCode === 8 || event.charCode >= 48 && event.charCode <= 57">
    <div *ngIf="formControls['weight'].invalid && formDir.submitted" class="mb-1">
      <small class="error-msg">Informe seu peso</small>
    </div>

    <label for="height" [class.form-errorMsg]="formControls['weight'].invalid && formDir.submitted">Altura
      (cm)</label>
    <input type="number" id="height" name="height" placeholder="ex: 182" formControlName="height"
      onkeypress="return event.keyCode === 8 || event.charCode >= 48 && event.charCode <= 57">
      <div *ngIf="formControls['height'].invalid && formDir.submitted" class="mb-1">
        <small class="error-msg">Informe sua altura</small>
      </div>

  <div class="radio-box">
      <div class="radio-btn">
        <input type="radio" id="male" name="gender" value="male" [(ngModel)]="gender" formControlName="gender">
        <label for="male">Masculino</label>
      </div>
      <div class="radio-btn">
        <input type="radio" id="female" name="gender" value="female" [(ngModel)]="gender" formControlName="gender">
        <label for="female">Feminino</label>
      </div>
    </div>
    <div *ngIf="formControls['gender'].invalid && formDir.submitted" class="error-msg flex justify-content-center">
      <small>Informe seu gênero</small>
    </div>

    <button class="btn">Calcular</button>

  </form>
  <div class="box my-3" *ngIf="result" [@box]="result">
    <div>
      <img [src]="userForm.get('userImage')?.value" class="profile-image">
    </div>
    <p class="box-name">{{userForm.get('name')?.value}} {{userForm.get('last_name')?.value}}</p>
    <div class="result-box">
      <p>Gasto calórico basal</p>
      <p>{{result}}</p>
    </div>
  </div>

  <button class="create-btn" *ngIf="result" [@btn]="result" (click)="createDiet()">Criar Dieta</button>
</main>
